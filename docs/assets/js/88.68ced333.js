(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{402:function(a,t,e){"use strict";e.r(t);var s=e(0),n=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"邮箱"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#邮箱"}},[a._v("#")]),a._v(" 邮箱")]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#flag"}},[a._v("Flag")])]),t("li",[t("a",{attrs:{href:"#域名邮箱"}},[a._v("域名邮箱")]),t("ul",[t("li",[t("a",{attrs:{href:"#yandex配置步骤"}},[a._v("Yandex配置步骤")])])])]),t("li",[t("a",{attrs:{href:"#邮件服务器"}},[a._v("邮件服务器")]),t("ul",[t("li",[t("a",{attrs:{href:"#邮件服务器概述"}},[a._v("邮件服务器概述")])]),t("li",[t("a",{attrs:{href:"#设置域名解析"}},[a._v("设置域名解析")])]),t("li",[t("a",{attrs:{href:"#卸载sendmail"}},[a._v("卸载sendmail")])]),t("li",[t("a",{attrs:{href:"#安装-postfix-和dovecot"}},[a._v("安装Postfix和Dovecot")])]),t("li",[t("a",{attrs:{href:"#查看版本"}},[a._v("查看版本")])]),t("li",[t("a",{attrs:{href:"#修改邮件传输代理"}},[a._v("修改邮件传输代理")])]),t("li",[t("a",{attrs:{href:"#查看是否修改成功"}},[a._v("查看是否修改成功")])]),t("li",[t("a",{attrs:{href:"#修改postfix配置"}},[a._v("修改Postfix配置")])]),t("li",[t("a",{attrs:{href:"#修改dovecot配置"}},[a._v("修改Dovecot配置")])]),t("li",[t("a",{attrs:{href:"#修改防火墙配置"}},[a._v("修改防火墙配置")])]),t("li",[t("a",{attrs:{href:"#配置用户及权限"}},[a._v("配置用户及权限")])]),t("li",[t("a",{attrs:{href:"#启动服务"}},[a._v("启动服务")])]),t("li",[t("a",{attrs:{href:"#使用mail测试发信"}},[a._v("使用mail测试发信")])]),t("li",[t("a",{attrs:{href:"#使用telnet测试收信"}},[a._v("使用telnet测试收信")])])])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[a._v("#")]),a._v(" Flag")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/denghongcai/forsaken-mail",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/denghongcai/forsaken-mail"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/malaohu/forsaken-mail",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/malaohu/forsaken-mail"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/flashmob/go-guerrilla",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/flashmob/go-guerrilla"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/PHPMailer",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/PHPMailer"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.mail-tester.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("测试邮箱"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"域名邮箱"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#域名邮箱"}},[a._v("#")]),a._v(" 域名邮箱")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.bt.cn/bbs/thread-32749-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("宝塔邮局管理器"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.httpsmail.com/hosting",target:"_blank",rel:"noopener noreferrer"}},[a._v("httpsmail"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"yandex配置步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yandex配置步骤"}},[a._v("#")]),a._v(" Yandex配置步骤")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hky.moe/archives/21",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://hky.moe/archives/21"),t("OutboundLink")],1)])]),a._v(" "),t("p",[t("strong",[a._v("端口")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("SMTP")]),a._v("："),t("code",[a._v("smtp.yandex.com:465 SSL")])]),a._v(" "),t("li",[t("code",[a._v("IMAP")]),a._v("："),t("code",[a._v("imap.yandex.com:993 SSL")])]),a._v(" "),t("li",[t("code",[a._v("POP3")]),a._v("："),t("code",[a._v("pop.yandex.com:995 SSL")])])]),a._v(" "),t("blockquote",[t("p",[a._v("注意：如果是添加第二个域名（一个域名是一个组织），进入"),t("a",{attrs:{href:"https://connect.yandex.com/portal/admin",target:"_blank",rel:"noopener noreferrer"}},[a._v("账户管理页面"),t("OutboundLink")],1),a._v("，\n然后点击顶部的域名后弹出下拉菜单有一个"),t("code",[a._v("New organization")]),a._v("按钮来添加新域名，然后按照步骤（跳过1、2）操作即可")])]),a._v(" "),t("ul",[t("li",[t("p",[a._v("1、注册账户 "),t("a",{attrs:{href:"https://mail.yandex.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://mail.yandex.com"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[a._v("2、添加域名 "),t("a",{attrs:{href:"https://connect.yandex.com/pdd",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://connect.yandex.com/pdd/"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[a._v("3、验证域名所有权")])])]),a._v(" "),t("blockquote",[t("p",[a._v("此时已经进入到管理页面，在左侧菜单"),t("code",[a._v("Domains")]),a._v("中点击域名（此时域名右侧是"),t("code",[a._v("禁止符号")]),a._v("）验证域名所有权，\n验证成功后左侧菜单栏会多出几个菜单（这时域名右侧是"),t("code",[a._v("感叹号")]),a._v("）")])]),a._v(" "),t("ul",[t("li",[a._v("4、DNS配置"),t("code",[a._v("SPF Record")]),a._v("、"),t("code",[a._v("MX")]),a._v("、二级域名 "),t("a",{attrs:{href:"https://connect.yandex.com/portal/admin/customization/dns",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://connect.yandex.com/portal/admin/customization/dns"),t("OutboundLink")],1)])]),a._v(" "),t("blockquote",[t("p",[a._v("按照上面链接中的DNS配置（或者点击左侧菜单栏"),t("code",[a._v("DNS management")]),a._v("）到自己域名所在服务商添加DNS解析，\n注意末尾的点不要丢了，等待几分钟刷新（域名右侧是"),t("code",[a._v("绿色的勾")]),a._v("）")])]),a._v(" "),t("ul",[t("li",[a._v("5、DNS配置"),t("code",[a._v("DKIM signature")]),a._v(" "),t("a",{attrs:{href:"https://connect.yandex.com/portal/admin/customization/mail",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://connect.yandex.com/portal/admin/customization/mail"),t("OutboundLink")],1)])]),a._v(" "),t("blockquote",[t("p",[a._v("点击上面的连接（就是左侧"),t("code",[a._v("Email")]),a._v("菜单）进入界面后点击"),t("code",[a._v("DKIM signatures")]),a._v("点击"),t("code",[a._v("Copy")]),a._v(",然后在域名所在服务商添加一条TXT记录DNS解析，\n主机记录（name）为"),t("code",[a._v("mail._domainkey")]),a._v(",值就是刚刚复制的"),t("code",[a._v("DKIM signatures")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/YandexMailDNS.png",alt:""}})]),a._v(" "),t("ul",[t("li",[a._v("6、添加邮箱账户")])]),a._v(" "),t("blockquote",[t("p",[a._v("点击 "),t("code",[a._v("Все сотрудники")]),a._v("（就是左侧第一个菜单），然后点击页面下方有一个带"),t("code",[a._v("+")]),a._v("的"),t("code",[a._v("add")]),a._v("按钮，\n再点击"),t("code",[a._v("Add a person")]),a._v("，在弹出的页面输入，带"),t("code",[a._v("*")]),a._v("的为必填，填完后就点击"),t("code",[a._v("橙色的add按钮")])])]),a._v(" "),t("ul",[t("li",[a._v("7、新添加的账户需要去登录并同意一个协议才能使用")])]),a._v(" "),t("blockquote",[t("p",[a._v("点击"),t("a",{attrs:{href:"https://mail.yandex.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://mail.yandex.com"),t("OutboundLink")],1),a._v("登录新账户并点击"),t("code",[a._v("Complete registration")]),a._v("按钮同意协议")])]),a._v(" "),t("ul",[t("li",[a._v("8、pop3/imap无法使用的解决办法")])]),a._v(" "),t("blockquote",[t("p",[a._v("点击"),t("a",{attrs:{href:"https://mail.yandex.com/#setup/client",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://mail.yandex.com/#setup/client"),t("OutboundLink")],1),a._v("\n登陆邮箱按照下图中步骤操作即可，登录后重新点击链接可省略下图中的1、2、3步")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/Yandex%E8%A7%A3%E5%86%B3POP3%E6%97%A0%E6%B3%95%E6%94%B6%E5%8F%96%E9%82%AE%E4%BB%B6.png",alt:""}})]),a._v(" "),t("ul",[t("li",[a._v("9、域名验证不通过解决办法")])]),a._v(" "),t("blockquote",[t("p",[a._v("进入"),t("a",{attrs:{href:"https://webmaster.yandex.com/sites",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://webmaster.yandex.com/sites"),t("OutboundLink")],1),a._v("点击没有通过验证域名上的"),t("code",[a._v("X")]),a._v("按钮进行删除，\n然后点击页面顶部的"),t("code",[a._v("+")]),a._v("按钮重新添加域名再验证。")])]),a._v(" "),t("blockquote",[t("p",[a._v("我的域名验证不通过发现是因为：添加不带"),t("code",[a._v("www")]),a._v("的域名，自动添加了"),t("code",[a._v("www")]),a._v("二级域名")])]),a._v(" "),t("p",[t("strong",[a._v("验证码填写")])]),a._v(" "),t("ul",[t("li",[a._v("使用Google翻译的软键盘")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/google%E7%BF%BB%E8%AF%91%E4%BF%84%E8%AF%AD%E8%BD%AF%E9%94%AE%E7%9B%98.png",alt:""}})]),a._v(" "),t("ul",[t("li",[a._v("使用"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BF%84%E8%AF%AD%E5%AD%97%E6%AF%8D",target:"_blank",rel:"noopener noreferrer"}},[a._v("俄语字母表"),t("OutboundLink")],1),a._v("一个个复制粘贴")])]),a._v(" "),t("h2",{attrs:{id:"邮件服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#邮件服务器"}},[a._v("#")]),a._v(" 邮件服务器")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://tourcoder.com/install-postfix-on-centos-7",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://tourcoder.com/install-postfix-on-centos-7/"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"邮件服务器概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#邮件服务器概述"}},[a._v("#")]),a._v(" 邮件服务器概述")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("MUA")]),a._v("："),t("code",[a._v("Mail User Agent")]),a._v("，邮件用户代理")])]),a._v(" "),t("blockquote",[t("p",[a._v("接收邮件所使用的邮件客户端，使用"),t("code",[a._v("IMAP")]),a._v("或"),t("code",[a._v("POP3")]),a._v("协议与服务器通信；")]),a._v(" "),t("p",[a._v("如："),t("code",[a._v("Outlook")]),a._v("、"),t("code",[a._v("Foxmail")]),a._v("、"),t("code",[a._v("thunderbird")]),a._v("、"),t("code",[a._v("Mac Mail")]),a._v("、"),t("code",[a._v("mutt")])])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("MTA")]),a._v("："),t("code",[a._v("Mail Transfer Agent")]),a._v("，邮件传输代理代为传递")])]),a._v(" "),t("blockquote",[t("p",[a._v("通过"),t("code",[a._v("SMTP")]),a._v("协议发送、转发邮件；")]),a._v(" "),t("p",[a._v("如："),t("code",[a._v("Sendmail")]),a._v("、"),t("code",[a._v("Postfix")])])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("MDA")]),a._v("："),t("code",[a._v("Mail Delivery Agent")]),a._v("，邮件投递代理")])]),a._v(" "),t("blockquote",[t("p",[a._v("将"),t("code",[a._v("MTA")]),a._v("接收到的邮件保存到磁盘或指定地方，通常会进行垃圾邮件及病毒扫描；")]),a._v(" "),t("p",[a._v("如："),t("code",[a._v("procmail")]),a._v("、"),t("code",[a._v("dropmail")])])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("MRA")]),a._v("："),t("code",[a._v("Mail Receive Agent")]),a._v("，邮件接收代理")])]),a._v(" "),t("blockquote",[t("p",[a._v("负责实现"),t("code",[a._v("IMAP")]),a._v("与"),t("code",[a._v("POP")]),a._v("3协议，与"),t("code",[a._v("MUA")]),a._v("进行交互；")]),a._v(" "),t("p",[a._v("如："),t("code",[a._v("dovecot")])])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("SMTP")]),a._v("："),t("code",[a._v("Simple Mail Transfer Protocol")]),a._v("，传输发送邮件所使用的标准协议；")]),a._v(" "),t("li",[t("code",[a._v("IMAP")]),a._v("："),t("code",[a._v("Internet Message Access Protocol")]),a._v("，接收邮件使用的标准协议之一；")]),a._v(" "),t("li",[t("code",[a._v("POP3")]),a._v("："),t("code",[a._v("Post Office Protocol 3")]),a._v("，接收邮件使用的标准协议之一。")])]),a._v(" "),t("p",[t("strong",[a._v("流程")])]),a._v(" "),t("blockquote",[t("p",[a._v("邮件服务器基本都有"),t("code",[a._v("MTA")]),a._v("，"),t("code",[a._v("MDA")]),a._v("，"),t("code",[a._v("MRA")]),a._v("组成")])]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("MUA")]),a._v("(发件人发送) --\x3e (若干个)"),t("code",[a._v("MTA")]),a._v(" --\x3e "),t("code",[a._v("MDA")]),a._v(" --\x3e "),t("code",[a._v("MRA")]),a._v(" <–- "),t("code",[a._v("MUA")]),a._v("(收件人收取)")])]),a._v(" "),t("blockquote",[t("p",[a._v("协议："),t("code",[a._v("MUA")]),a._v("到"),t("code",[a._v("MTA")]),a._v("，以及"),t("code",[a._v("MTA")]),a._v("到"),t("code",[a._v("MTA")]),a._v("之间使用"),t("code",[a._v("SMTP")]),a._v("协议，而收邮件时，"),t("code",[a._v("MUA")]),a._v("到"),t("code",[a._v("MDA")]),a._v("之间使用"),t("code",[a._v("POP3")]),a._v("或"),t("code",[a._v("IMAP")]),a._v("协议。")])]),a._v(" "),t("ul",[t("li",[a._v("一、用户利用"),t("code",[a._v("MUA")]),a._v("寄信到"),t("code",[a._v("MTA")]),a._v("。配置"),t("code",[a._v("MUA")]),a._v("时要配上"),t("code",[a._v("SMTP")]),a._v("服务器域名,然后发送邮件。\n"),t("ul",[t("li",[a._v("比如使用网易账户发送邮件就要在配置"),t("code",[a._v("smtp.163.com")]),a._v(",这样邮件就发送到网易"),t("code",[a._v("MTA")]),a._v("。")])])]),a._v(" "),t("li",[a._v("二、 "),t("code",[a._v("MTA")]),a._v("检查收件人服务器如果不是自己则传递到下一跳"),t("code",[a._v("MTA")]),a._v("，直到传递到目的"),t("code",[a._v("MTA")]),a._v("。")]),a._v(" "),t("li",[a._v("三、 目的"),t("code",[a._v("MTA")]),a._v("收到邮件后将邮件存储到"),t("code",[a._v("MDA")]),a._v("中，"),t("code",[a._v("MDA")]),a._v("对邮件进行垃圾过滤，病毒查杀。")]),a._v(" "),t("li",[a._v("四、 "),t("code",[a._v("MRA")]),a._v("把邮件从"),t("code",[a._v("MDA")]),a._v("收取到用户的收件箱中。")]),a._v(" "),t("li",[a._v("五、 "),t("code",[a._v("MUA")]),a._v("收取邮件，此时收取邮件只是将"),t("code",[a._v("MRA")]),a._v("中的邮件下载到本地。")])]),a._v(" "),t("h3",{attrs:{id:"设置域名解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置域名解析"}},[a._v("#")]),a._v(" 设置域名解析")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("记录类型")]),a._v(" "),t("th",[a._v("主机记录")]),a._v(" "),t("th",[a._v("解析线路(isp)")]),a._v(" "),t("th",[a._v("记录值")]),a._v(" "),t("th",[a._v("MX优先级")]),a._v(" "),t("th",[a._v("TTL值")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("A")]),a._v(" "),t("td",[a._v("mail")]),a._v(" "),t("td",[a._v("默认")]),a._v(" "),t("td",[a._v("服务器IP地址")]),a._v(" "),t("td",[a._v("–")]),a._v(" "),t("td",[a._v("10 分钟")])]),a._v(" "),t("tr",[t("td",[a._v("MX")]),a._v(" "),t("td",[a._v("@")]),a._v(" "),t("td",[a._v("默认")]),a._v(" "),t("td",[a._v("mail.域名")]),a._v(" "),t("td",[a._v("10")]),a._v(" "),t("td",[a._v("10 分钟")])])])]),a._v(" "),t("h3",{attrs:{id:"卸载sendmail"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载sendmail"}},[a._v("#")]),a._v(" 卸载sendmail")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum remove "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sendmail")]),a._v("\n")])])]),t("h3",{attrs:{id:"安装postfix和dovecot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装postfix和dovecot"}},[a._v("#")]),a._v(" 安装"),t("code",[a._v("Postfix")]),a._v("和Dovecot")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" postfix dovecot\n")])])]),t("h3",{attrs:{id:"查看版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看版本"}},[a._v("#")]),a._v(" 查看版本")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"postfix\\|dovecot"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" postfix "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" dovecot\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"postfix|dovecot"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("egrep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"postfix|dovecot"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qa")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/postfix|dovecot/"')]),a._v("\n")])])]),t("h3",{attrs:{id:"修改邮件传输代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改邮件传输代理"}},[a._v("#")]),a._v(" 修改邮件传输代理")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("alternatives "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" mta\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者先查看邮件传输代理程序，再设置")]),a._v("\n/usr/sbin/alternatives "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" mta /usr/sbin/sendmail.postfix\n")])])]),t("blockquote",[t("p",[a._v("会提示找到几个可用程序，输入自己需要的那个程序的数字即可")])]),a._v(" "),t("h3",{attrs:{id:"查看是否修改成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看是否修改成功"}},[a._v("#")]),a._v(" 查看是否修改成功")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("alternatives "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--display")]),a._v(" mta\n")])])]),t("blockquote",[t("p",[a._v("第一行显示"),t("code",[a._v("mta - status is manual.")]),a._v("则表示设置成功")])]),a._v(" "),t("h3",{attrs:{id:"修改postfix配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改postfix配置"}},[a._v("#")]),a._v(" 修改Postfix配置")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://blog.leanote.com/post/colin_xia@yeah.net/postfix-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E7%AC%94%E8%AE%B0",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://blog.leanote.com/post/colin_xia@yeah.net/postfix-官方文档笔记"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/operationhome/p/9056870.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.cnblogs.com/operationhome/p/9056870.html"),t("OutboundLink")],1)])]),a._v(" "),t("blockquote",[t("p",[a._v("在"),t("code",[a._v("main.cf")]),a._v("中配置的值会自动分散到多个指定的配置文件中去")])]),a._v(" "),t("p",[t("strong",[a._v("查看配置")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出所有postfix配置项以及默认值")]),a._v("\npostconf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不输出#开头和空行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'^#\\|^$'")]),a._v(" /etc/postfix/main.cf\n")])])]),t("p",[t("strong",[a._v("编辑配置")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/postfix/main.cf\n")])])]),t("p",[t("strong",[a._v("修改以下内容")])]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 75行:主机名")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("myhostname")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("mail.example.com")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 83行:设置本地网络的邮件域")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("mydomain")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("example.com")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 99行:要外发邮件时发件人的邮件域名，这里取的mydomain变量值")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("myorigin")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$mydomain")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 116行:默认是localhost，修改成all，即监听所有网络接口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("inet_interfaces")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("all")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 119行:网络协议 ipv6、ipv4或者all")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("inet_protocols")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("all")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 164行:设置可接收邮件的主机名或域名，来自其他主机名或域名的邮件将拒绝接收")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("mydestination")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$myhostname, localhost.$mydomain, localhost, $mydomain")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 210行:制定接收邮件的规则，可以是hash文件，可以直接注释")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("local_recipient_maps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 264行:收发客户端的地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("mynetworks")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0.0.0.0/0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 296行:设置可转发来自哪些域名或主机名的邮件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("relay_domains")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$mydestination")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 419行:邮件存储的位置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("home_mailbox")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("Maildir/")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 572行:指定MUA通过smtp连接postfix时返回的header头信息，定义欢迎信息")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_banner")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$myhostname ESMTP $mail_name")]),a._v("\n")])])]),t("p",[t("strong",[a._v("在文件结尾加入")])]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启用SMTP认证")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_sasl_type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("dovecot")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_sasl_path")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/var/spool/postfix/private/auth")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定postfix使用sasl验证：就是启用smtp并要求进行账号、密码效验")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_sasl_auth_enable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("yes")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定SMTP认证的本地域名：可以使用''或注释掉，默认为空")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_sasl_local_domain")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$myhostname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 支持非标准验证规定的行为，")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定postfix兼容MUA使用不规则的smtp协议，主要针对老版本的outlook")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("broken_sasl_auth_clients")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("yes")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 当客户端引发错误时,postfix的初始等待时间 ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_error_sleep_time")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("0s")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 收件人限制条件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_recipient_restrictions")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("permit_mynetworks,permit_sasl_authenticated,reject_unauth_destination,reject_unknown_sender_domain")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 客户端限制")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_client_restrictions")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("permit_sasl_authenticated")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 取消smtp的匿名登录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("smtpd_sasl_security_options")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("noanonymous")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("proxy_read_maps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("$local_recipient_maps $mydestination $virtual_alias_maps $virtual_alias_domains $virtual_mailbox_maps $virtual_mailbox_domains $relay_recipient_maps $relay_domains $canonical_maps $sender_canonical_maps $recipient_canonical_maps $relocated_maps $transport_maps $mynetworks")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定通过postfix发送邮件的体积大小，此处表示5M")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("message_size_limit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("5242880")]),a._v("\n")])])]),t("blockquote",[t("p",[t("code",[a._v("smtpd_recipient_restrictions")]),a._v("（收件人限制）有以下可用值：")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("permit_mynetworks")]),a._v("允许本地的网络接收")]),a._v(" "),t("p",[t("code",[a._v("permit_sasl_authenticated")]),a._v("允许通过"),t("code",[a._v("SASL")]),a._v("验证的用户（也就是"),t("code",[a._v("smtp")]),a._v("链接时通过了账号、密码效验的用户）的所有用户")]),a._v(" "),t("p",[t("code",[a._v("reject_unauth_destination")]),a._v("拒绝无法认证的目的地")])])]),a._v(" "),t("h3",{attrs:{id:"修改dovecot配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改dovecot配置"}},[a._v("#")]),a._v(" 修改Dovecot配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/dovecot/dovecot.conf\n")])])]),t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('auth_mechanisms = plain login\nbase_dir = /var/run/dovecot/\ndebug_log_path = /var/log/dovecot_debug.log\ndisable_plaintext_auth = no\nfirst_valid_uid = 1000\ninfo_log_path = /var/log/dovecot_info.log\nlogin_trusted_networks = 0.0.0.0/0\nmail_location = mbox:~/mail:INBOX=/var/mail/%u\nmbox_write_locks = fcntl\nnamespace inbox {\n  inbox = yes\n  location = mbox:~/mail:INBOX=/var/mail/%u\n  mailbox Drafts {\n    special_use = \\Drafts\n  }\n  mailbox Junk {\n    special_use = \\Junk\n  }\n  mailbox Sent {\n    special_use = \\Sent\n  }\n  mailbox "Sent Messages" {\n    special_use = \\Sent\n  }\n  mailbox Trash {\n    special_use = \\Trash\n  }\n  prefix =\n}\npassdb {\n  args = dovecot\n  driver = pam\n}\nservice auth {\n  unix_listener /var/spool/postfix/private/auth {\n    mode = 0666\n    user = postfix\n  }\n  unix_listener auth-userdb {\n    group = noreply\n    mode = 0666\n    user = noreply\n  }\n}\nservice imap-login {inet_listener imap {\n    port = 143\n  }\n}\nservice pop3-login {\n  inet_listener pop3 {\n    port = 110\n  }\n}\nssl = no\nssl_cert = </etc/pki/dovecot/certs/dovecot.pem\nssl_key = </etc/pki/dovecot/private/dovecot.pem\nuserdb {\n  driver = passwd\n}\n')])])]),t("ul",[t("li",[a._v("其实上面的配置文件并非一个，而是修改了"),t("code",[a._v("/etc/dovecot/conf.d")]),a._v("文件夹下的以下几个文件\n"),t("ul",[t("li",[t("code",[a._v("10-auth.conf")])]),a._v(" "),t("li",[t("code",[a._v("10-ssl.conf")])]),a._v(" "),t("li",[t("code",[a._v("10-mail.conf")])]),a._v(" "),t("li",[t("code",[a._v("10-master.conf")])]),a._v(" "),t("li",[t("code",[a._v("10-logging.conf")])])])])]),a._v(" "),t("blockquote",[t("p",[a._v("修改完成以后使用"),t("code",[a._v("doveconf -n > dovecot-new.conf")]),a._v("命令生成一个全新的综合的配置文件。")])]),a._v(" "),t("h3",{attrs:{id:"修改防火墙配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改防火墙配置"}},[a._v("#")]),a._v(" 修改防火墙配置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("firewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("imap\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("smtp\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v(" --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pop3\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("/tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("/udp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("110")]),a._v("/tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("110")]),a._v("/udp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("143")]),a._v("/tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zone")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("143")]),a._v("/udp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--permanent")]),a._v("\nfirewall-cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--reload")]),a._v("\n")])])]),t("h3",{attrs:{id:"配置用户及权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置用户及权限"}},[a._v("#")]),a._v(" 配置用户及权限")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加用户")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" 用户名\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置密码")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"密码"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("passwd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--stdin")]),a._v(" 用户名\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 授权")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 0775 /var/spool/mail/*\n")])])]),t("h3",{attrs:{id:"启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[a._v("#")]),a._v(" 启动服务")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启postfix服务")]),a._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" postfix\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置postfix开机启动")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" postfix on\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启dovecot服务")]),a._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" dovecot\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置dovecot开机启动")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" dovecot on\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启postfix/dovecot")]),a._v("\nsystemctl restart postfix/dovecot\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看postfix/dovecot状态")]),a._v("\nsystemctl status postfix/dovecot\n")])])]),t("h3",{attrs:{id:"使用mail测试发信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用mail测试发信"}},[a._v("#")]),a._v(" 使用mail测试发信")]),a._v(" "),t("blockquote",[t("p",[a._v("未做明确配置时，"),t("code",[a._v("mail")]),a._v("默认将本机作为发信、收信的服务器，所以此步骤中的测试操作在邮件服务器本机完成。")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"邮件内容"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" mail "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"邮件主题"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" 发送人邮件地址 接收人邮件地址\n")])])]),t("h3",{attrs:{id:"使用telnet测试收信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用telnet测试收信"}},[a._v("#")]),a._v(" 使用telnet测试收信")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" telnet\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("telnet 域名 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);